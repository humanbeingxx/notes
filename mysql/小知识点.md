# å°çŸ¥è¯†ç‚¹

## åŒæ—¶æŸ¥è¯¢å’Œæ›´æ–°

```sql
update table as out_tb
    set cnt = (
        select count(*) from table as in_tb
        where in_tb.type = out_tb.type
    );
```

æŠ¥é”™ You can't specify target table 'out_tb' for update in FROM clause

ä½¿ç”¨joinè¿›è¡Œæ”¹é€ 

```sql
update table as out_tb
    inner join (
        select type, count(*) as cnt from table group by type
    ) as in_tb using(tye)
set out_tb.cnt = in_tb.cnt;
```

## count

count(*)æ˜¯ç›´æ¥è·å–è¡¨ä¸­è¡Œæ•°ï¼Œcount(col)æ˜¯è·å–è¯¥åˆ—énullè¡Œæ•°ã€‚

## ä¼˜åŒ–limitåˆ†é¡µ

å½“ç¿»é¡µé‡æ¯”è¾ƒå¤§æ—¶ï¼Œæ™®é€šçš„åˆ†é¡µéœ€è¦æŠ›å¼ƒå¤§é‡çš„æ•°æ®ï¼Œæ­¤æ—¶å°½å¯èƒ½ä½¿ç”¨è¦†ç›–ç´¢å¼•ã€‚

## innodbå’Œmyisamçš„åŒºåˆ«

- myisamåªæ”¯æŒåˆ°è¡¨çº§é”ï¼Œæ“ä½œæ—¶ä¼šè‡ªåŠ¨åŠ ä¸Šè¡¨é”ã€‚
- myisamä¸æ”¯æŒäº‹åŠ¡ã€‚
- myisamä¿å­˜äº†è¡¨çš„æ€»è¡Œæ•°ã€‚
- myisamæ”¯æŒå…¨æ–‡ç´¢å¼•ã€‚
- myisamå…è®¸æ²¡æœ‰ä¸»é”®çš„è¡¨ï¼Œinnodbä¼šè‡ªåŠ¨ç”Ÿæˆã€‚
- myisamçš„ç´¢å¼•ä¿å­˜çš„æ˜¯è¡Œçš„åœ°å€ã€‚

## mysqlä¸ºä»€ä¹ˆç”¨b+treeè€Œä¸æ˜¯b-tree

- ç£ç›˜æ¯æ¬¡è¯»å–çš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œb+åªæœ‰å¶å­èŠ‚ç‚¹æœ‰æ•°æ®ï¼Œæ‰€ä»¥æ¯æ¬¡ç£ç›˜IOèƒ½è¯»å–æ›´å¤šçš„ç´¢å¼•ä¿¡æ¯ï¼Œä»è€Œå‡å°‘ç£ç›˜IOæ¬¡æ•°ã€‚
- b+å­èŠ‚ç‚¹æœ‰æŒ‡é’ˆä¸²è”ï¼Œæ–¹ä¾¿éå†ã€‚
