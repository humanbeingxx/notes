# I/O

## 种类

注意 同步/异步 和 阻塞/非阻塞 的区别。

I/O时系统内核分两部分，一是数据准备，而是数据复制。

### 阻塞I/O

在数据准备和复制阶段，调用了系统函数的应用进程都会阻塞。

### 非阻塞I/O

数据准备阶段不会阻塞，而是当未准备好时返回EAGAIN，I/O函数会循环测试标志位，直到数据准备完毕。复制步骤，还是阻塞。

### IO复用模型

#### select

用户进程先调用select函数，并阻塞在select上，直到内核有数据准备好。
select中会不断轮询请求的数据（文件描述符）。

#### epoll

用户进程也会阻塞在epoll上，和select的区别是不用轮询，当epoll_wait检测到描述符事件发生并将此事件通知应用程序，简单说就是由等待的数据主动通知。

### 异步I/O

用户进程调用后立即返回，系统调用通过特定通道将数据传输给用户进程。

### 信号驱动I/O

和异步I/O一样，需要有特定通道来和内核交互，一般是信号处理程序。
用户进程调用后立即返回 -> 数据准备好后内核回调信号处理程序 -> 用户进程再次调用数据复制函数，阻塞。
