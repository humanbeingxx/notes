# 正则表达式——环绕

这里说的向前、向后，是以括号内的表达式的角度看的。但是使用上，一般是需要匹配括号外的字符。

## 肯定式向前查找 (?=...)

`xxx(?=yyy)` 查找后面是yyy的xxx

`abc(?=.*xyz.*)` 查找xyz，且前面出现过abc

## 否定式向前查找 (?!...)

`xxx(?!yyy)` 查找后面不是yyy的xxx

## 肯定式向后查找 (?<=...)

`((?<=xxx)|(?<=yyy))zzz` 查找前面是xxx或者yyy的zzz

## 否定式向后查找 (?<!...)

`(?<!fuc)k` 查找前面不是fuc的k

## 匹配位置

环绕这种方式，又被称为零宽断言。断言不会占用匹配时的字符位置，因此可以匹配两个字符之间的位置。

现有需要，要给一串数字添加","分隔，例如 1234567890 分隔成 1,234,567,890

正则表达式是从左向右匹配字符，这个case中不知道字符串的长度，因此在一次遍历过程中无法确定要在哪些位置添加逗号。所以这里要用到回溯从右向左完成替换。

在替换前，最右边是行终结符，每替换一次，会变成逗号。找到这个规律，可以写出如下正则 `(?<=\d)(?=\d{3}($|,))`。但是要完成替换需要多次执行正则。

另外一种写法，`(?<=\d)(?=(\d{3})+$)`，可以一次替换完成。
